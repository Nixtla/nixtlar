<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Special Topics • nixtlar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Special Topics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nixtlar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/get-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://docs.nixtla.io/">Nixtla</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/anomaly-detection.html">Anomaly Detection</a></li>
    <li><a class="dropdown-item" href="../articles/cross-validation.html">Cross-Validation</a></li>
    <li><a class="dropdown-item" href="../articles/data-requirements.html">Data requirements</a></li>
    <li><a class="dropdown-item" href="../articles/exogenous-variables.html">Exogenous Variables</a></li>
    <li><a class="dropdown-item" href="../articles/historical-forecast.html">Historical Forecast</a></li>
    <li><a class="dropdown-item" href="../articles/long-horizon.html">Long Horizon Forecast</a></li>
    <li><a class="dropdown-item" href="../articles/prediction-intervals.html">Prediction Intervals</a></li>
    <li><a class="dropdown-item" href="../articles/quantiles.html">Quantile Forecasts</a></li>
    <li><a class="dropdown-item" href="../articles/setting-up-your-api-key.html">Setting Up Your API Key</a></li>
    <li><a class="dropdown-item" href="../articles/special-topics.html">Special Topics</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Nixtla/nixtlar"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Special Topics</h1>
            
      

      <div class="d-none name"><code>special-topics.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nixtla.github.io/nixtlar/">nixtlar</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'tsibble':</span></span>
<span><span class="co">#&gt;   method               from </span></span>
<span><span class="co">#&gt;   as_tibble.grouped_df dplyr</span></span></code></pre></div>
<div class="section level2">
<h2 id="special-topics">Special topics<a class="anchor" aria-label="anchor" href="#special-topics"></a>
</h2>
<p>This vignette explains some special topics regarding the use of
<code>TimeGPT</code> via <code>nixtlar</code>.</p>
</div>
<div class="section level2">
<h2 id="handling-missing-values">1. Handling missing values<a class="anchor" aria-label="anchor" href="#handling-missing-values"></a>
</h2>
<p>Before using <code>TimeGPT</code>, you need to ensure that:</p>
<ol style="list-style-type: decimal">
<li>The target column contains no missing values
(<code>NA</code>).<br>
</li>
<li>Given the frequency of the data, the dates are continuous, with no
missing dates between the start and the end dates.</li>
</ol>
<p>Regarding the second point, it is worth mentioning that it is
possible to have multiple time series that start and end on different
dates, but each series must contain uninterrupted data for its given
time frame.</p>
<p>There are several ways to check for missing values in R. One method
is with the <code>any</code> and <code>is.na</code> functions from base
R.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">nixtlar</span><span class="fu">::</span><span class="va"><a href="../reference/electricity.html">electricity</a></span> <span class="co"># load data </span></span>
<span></span>
<span><span class="co"># create some missing values at random </span></span>
<span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">y</span><span class="op">[</span><span class="va">index</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co"># check for missing values </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span> <span class="co"># will return TRUE if there are missing values </span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>If you find missing values in your data, you need to decide how to
fill them, which is very context-dependent. For example, if you are
dealing with daily retail data, a missing value most likely indicates
that there were no sales on that day, and you can probably fill it with
zero. However, if you are working with hourly temperature data, a
missing value likely means that the sensor was not functioning
correctly, and you might prefer to use interpolation to fill the missing
values. Whatever you decide to do, always keep in mind the nature of
your data.</p>
<p>Checking if there are missing dates is more complicated since it
depends on the frequency of the data. Sometimes plotting can help spot
large gaps. <code>nixtlar</code> has a plotting function called
<code>nixtla_client_plot</code> that can be used for this.</p>
<p>However, this method is ineffective when the missing dates are not
continuous. One possible solution is to compare the dates for every
unique id with a vector of dates generated using the start date, the end
date, and the frequency of your data. This requires knowing such
information, which can become tricky when working with hundreds or
thousands of time series.</p>
</div>
<div class="section level2">
<h2 id="specifying-the-frequency-of-your-data">2. Specifying the frequency of your data<a class="anchor" aria-label="anchor" href="#specifying-the-frequency-of-your-data"></a>
</h2>
<p>The frequency parameter is crucial when working with time series data
because it informs the model about the expected intervals between data
points. The core functions of <code>nixtlar</code> that interface with
<code>TimeGPT</code>, such as <code>nixtla_client_forecast</code>,
<code>nixtla_client_historic</code>,
<code>nixtla_client_detect_anomalies</code>, and
<code>nixtla_client_cross_validation</code>, require you to specify the
<code>freq</code> parameter, although in some cases <code>nixtlar</code>
can deduce it from your data.</p>
<p><code>TimeGPT</code> supports any of <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases" class="external-link">pandas’s
offset aliases</a>. Some common aliases are presented in the table
below.</p>
<table class="table">
<thead><tr class="header">
<th>Frequency</th>
<th>Alias</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Yearly</td>
<td>Y or A</td>
</tr>
<tr class="even">
<td>Quarterly</td>
<td>Q</td>
</tr>
<tr class="odd">
<td>Monthly</td>
<td>M</td>
</tr>
<tr class="even">
<td>Weekly (starting Sundays)</td>
<td>W</td>
</tr>
<tr class="odd">
<td>Daily</td>
<td>D</td>
</tr>
<tr class="even">
<td>Hourly</td>
<td>H</td>
</tr>
</tbody>
</table>
<p>The default value of the frequency parameter is <code>NULL</code>.
When this parameter is not specified, <code>nixtlar</code> will attempt
to determine the frequency of your data. For most common frequencies,
such as yearly, quarterly, monthly, weekly, daily, and hourly,
<code>nixtlar</code> can identify the frequency from the
<code>time_col</code> column, regardless of whether you are working with
data frames or tsibbles.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">nixtlar</span><span class="fu">::</span><span class="va"><a href="../reference/electricity.html">electricity</a></span></span>
<span><span class="va">fcst</span> <span class="op">&lt;-</span> <span class="fu">nixtlar</span><span class="fu">::</span><span class="fu"><a href="../reference/nixtla_client_forecast.html">nixtla_client_forecast</a></span><span class="op">(</span><span class="va">df</span>, h <span class="op">=</span> <span class="fl">8</span>, id_col <span class="op">=</span> <span class="st">"unique_id"</span>, level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">95</span><span class="op">)</span><span class="op">)</span> <span class="co"># freq = "H"</span></span>
<span><span class="co">#&gt; Frequency chosen: H</span></span>
<span><span class="co"># infer the frequency when `freq` is not specified </span></span></code></pre></div>
<p>When the frequency is not apparent, <code>nixtlar</code> will default
to a daily frequency. Currently, <code>nixtlar</code> cannot
automatically detect subhourly frequencies. In such cases, you must
explicitly specify these frequencies. For example, for subhourly data,
you should set <code>freq="15T"</code> for fifteen-minute data
intervals.</p>
<p>Moreover, if you are dealing with irregular frequencies, such as
business days or custom holiday calendars, you must specify them
directly. For instance, for business days, you should set
<code>freq="B"</code>, which corresponds to the pandas alias for
business day frequency.</p>
<p>When dealing with weekly frequency (<code>W</code>),
<code>nixtlar</code> assumes that the weeks start on Sunday.
Consequently, <code>TimeGPT</code> will return dates corresponding to
weeks that begin on Sundays. If your weeks start on a different day, for
example, Mondays, you should specify the frequency as
<code>W-MON</code>. You can select any day of the week with the aliases
<code>W-MON</code>, <code>W-TUE</code>, <code>W-WED</code>,
<code>W-THU</code>, <code>W-FRI</code>, and <code>W-SAT</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mariana Menchero.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
